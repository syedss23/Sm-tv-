<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Complete Payment — SmTv Urdu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0d171f" />
  <link rel="icon" href="/favicon.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg:#0d171f; --card:#101b28; --line:#20364c; --text:#eaf6ff; --muted:#a8c7de;
      --accent:#19b3ff; --accent2:#ffd400; --chip:#0d2030; --chip-b:#284e70;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:'Montserrat',Arial,sans-serif}
    a{text-decoration:none}
    .wrap{max-width:760px;margin:0 auto;padding:12px}
    header{position:sticky;top:0;z-index:10;background:#111c28;border-bottom:1px solid #1e2b3a}
    header .bar{display:flex;align-items:center;gap:10px;padding:10px 12px}
    .back{background:#17263a;border:1px solid #203447;color:#8fd8ff;border-radius:8px;padding:7px 12px;font-weight:700}
    h1{margin:0;font-size:1.12em;font-weight:800}
    .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px;margin-top:14px;box-shadow:0 4px 18px #0004}
    .title{font-weight:800;color:#86e8ff;margin:0 0 8px 0}
    .note{font-size:.92em;color:var(--muted)}
    .row{display:grid;grid-template-columns:1fr;gap:10px}

    .buttons{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:12px;border-radius:12px;font-weight:800;color:#081624;background:#19b3ff;
      box-shadow:0 4px 14px #19b3ff33;text-align:center
    }
    .btn.paytm{background:#00baf2}
    .btn.phonepe{background:#6739b7;color:#fff}
    .btn.gpay{background:#34a853;color:#fff}
    .btn.other{background:#ffd400;color:#13263a}
    .btn:active{transform:translateY(1px)}

    .pill{display:inline-block;background:var(--chip);border:1px solid --chip-b;border-radius:999px;padding:6px 10px;color:#aee6ff;font-weight:700}
    .upi-copy{display:flex;align-items:center;gap:8px;background:#0f2131;border:1px solid #23445f;border-radius:10px;padding:10px 12px}
    .copy-btn{background:#17314a;color:#9fe0ff;border:1px solid #28577b;border-radius:8px;padding:6px 10px;font-weight:800}

    .qrwrap{display:flex;align-items:center;gap:14px;flex-wrap:wrap}
    .qr{width:220px;height:220px;border-radius:12px;background:#fff;display:flex;align-items:center;justify-content:center}
    .qr img{width:100%;height:100%;object-fit:contain;border-radius:12px}

    .muted{opacity:.75}
    .cta{
      display:inline-block;background:var(--accent2);color:#13263a;font-weight:800;
      padding:10px 16px;border-radius:999px;box-shadow:0 4px 14px #ffd40055
    }
    details summary{cursor:pointer;font-weight:800;color:#aee6ff}
    .center{text-align:center}
    @media(min-width:680px){
      .buttons{grid-template-columns:repeat(4,1fr)}
      .row.two{grid-template-columns:1fr 1fr}
    }
  </style>
</head>
<body>
  <header>
    <div class="bar wrap">
      <a class="back" href="/premium">← Back</a>
      <h1>Complete Payment</h1>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <h2 class="title" id="planTitle">SmTv Urdu Premium</h2>

      <!-- UPI ID copy block -->
      <div class="upi-copy" style="margin:10px 0 6px">
        <div>
          <div class="note">Pay to UPI ID</div>
          <div id="upiText" style="font-weight:800;color:#aee6ff">dubbedseriespremiu@ybl</div>
        </div>
        <button id="copyBtn" class="copy-btn">Copy</button>
      </div>

      <p class="note" id="desc">
        Choose your UPI app or scan the QR to pay. Enter the amount manually in your UPI app. After payment, click “Activate subscription” to send the screenshot on Telegram.
      </p>

      <div class="buttons" style="margin-top:12px">
        <a id="gpayBtn" class="btn gpay" href="#">Google Pay</a>
        <a id="ppBtn" class="btn phonepe" href="#">PhonePe</a>
        <a id="ptmBtn" class="btn paytm" href="#">Paytm</a>
        <a id="otherBtn" class="btn other" href="#">Other UPI</a>
      </div>
      <p class="note" style="margin-top:8px">
        Your device will open the selected app when supported; otherwise it will show the UPI app chooser. If one app shows “risk” or fails, try another or scan the QR.
      </p>
    </section>

    <section class="card row two">
      <div>
        <h3 class="title">Scan UPI QR</h3>
        <div class="qrwrap">
          <div class="qr"><img src="/assets/posters/upi-qr.png" alt="UPI QR" /></div>
          <div class="note">
            - Open your UPI app and scan this QR, then enter the plan amount manually (e.g., ₹99 or ₹249).<br/>
            - If QR doesn’t open, use the UPI ID shown above.
          </div>
        </div>
        <p style="margin-top:10px">
          <a class="cta" href="/assets/posters/upi-qr.png" download="SmTv-UPI-QR.png">Download QR</a>
        </p>
      </div>
      <div>
        <h3 class="title">After payment</h3>
        <p class="note">Tap below to open Telegram with a prefilled message, then attach the payment screenshot for instant activation.</p>
        <p><a id="activateBtn" class="cta" href="#" rel="noopener">Activate subscription</a></p>
        <p class="muted" style="margin-top:6px">If any app shows “risk” or fails, try another UPI app or use the QR/UPI ID.</p>
      </div>
    </section>

    <section class="card">
      <h3 class="title">Help</h3>
      <details>
        <summary>Payment not going through?</summary>
        <div class="note">
          • Update your UPI app and retry after a minute.<br/>
          • Try another UPI app or use the QR/UPI ID and enter amount manually.<br/>
          • Payee name should show as “Syed abuddin”.
        </div>
      </details>
      <details>
        <summary>Need support?</summary>
        <div class="note">
          Message on Telegram: <a href="https://t.me/Shaikhyder7861" target="_blank" rel="noopener" style="color:#8fd8ff;text-decoration:underline">@Shaikhyder7861</a>.
        </div>
      </details>
    </section>

    <p class="center muted">UPI payment via your own app • Manual amount entry</p>
  </main>

  <script>
    // Config
    const VPA = 'dubbedseriespremiu@ybl';
    const PAYEE_NAME = 'Syed abuddin';
    const TELEGRAM_USERNAME = 'Shaikhyder7861';

    // Optional label for header
    const params = new URLSearchParams(location.search);
    const label = (params.get('label') || 'Premium').trim();
    document.getElementById('planTitle').textContent = `SmTv Urdu — ${label}`;

    // UPI params WITHOUT amount (user enters manually)
    const epoch = Date.now();
    const tn = 'SmTv Premium';
    const tr = `smtv-${label.toLowerCase().slice(0,1)}-${epoch}`;
    const baseParams = `pa=${encodeURIComponent(VPA)}&pn=${encodeURIComponent(PAYEE_NAME)}&cu=INR&tn=${encodeURIComponent(tn)}&tr=${encodeURIComponent(tr)}`;

    // App-specific schemes (attempt direct open), plus generic fallback
    const linkGPay    = `gpay://upi/pay?${baseParams}`;    // Google Pay
    const linkPhonePe = `phonepe://pay?${baseParams}`;     // PhonePe
    const linkPaytm   = `paytmmp://pay?${baseParams}`;     // Paytm
    const linkGeneric = `upi://pay?${baseParams}`;         // Other UPI / chooser

    // Graceful open with fallback to generic chooser if app doesn't launch
    function openWithFallback(primaryUrl, fallbackUrl){
      const start = Date.now();
      location.href = primaryUrl;
      setTimeout(()=>{
        if (Date.now() - start < 1200) location.href = fallbackUrl;
      }, 900);
    }

    // Wire buttons
    document.getElementById('gpayBtn').addEventListener('click', (e)=>{
      e.preventDefault(); openWithFallback(linkGPay, linkGeneric);
    });
    document.getElementById('ppBtn').addEventListener('click', (e)=>{
      e.preventDefault(); openWithFallback(linkPhonePe, linkGeneric);
    });
    document.getElementById('ptmBtn').addEventListener('click', (e)=>{
      e.preventDefault(); openWithFallback(linkPaytm, linkGeneric);
    });
    document.getElementById('otherBtn').href = linkGeneric;

    // Copy UPI ID
    document.getElementById('copyBtn').addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(VPA);
        const btn = document.getElementById('copyBtn');
        const old = btn.textContent;
        btn.textContent = 'Copied';
        setTimeout(()=>btn.textContent=old,1200);
      } catch(e) {
        alert('Copy failed. Long-press to copy: ' + VPA);
      }
    });

    // Telegram activation with prefilled text; use share first, then chat
    const tgText = `Payment done for SmTv Premium (${label})
UPI Ref: ${tr}
VPA: ${VPA}
Please activate my subscription.`;
    const tgShare = `https://t.me/share/url?url=${encodeURIComponent('')}&text=${encodeURIComponent(tgText)}`;
    const tgChat  = `https://t.me/${TELEGRAM_USERNAME}`;

    document.getElementById('activateBtn').addEventListener('click', (e)=>{
      e.preventDefault();
      location.href = tgShare;               // share first (prefill text)
      setTimeout(()=>{ window.open(tgChat, '_blank'); }, 900); // then open chat
    });

    // iOS/desktop: steer to QR/UPI ID (app schemes won’t work)
    const isAndroid = /Android/i.test(navigator.userAgent);
    if(!isAndroid){
      document.getElementById('desc').textContent =
        'On iOS/desktop, scan the QR below or use the UPI ID to pay and enter the amount manually. After payment, tap “Activate subscription” to send the screenshot on Telegram.';
      // Replace app buttons with generic support link for iOS
      document.getElementById('gpayBtn').href = tgChat;
      document.getElementById('ppBtn').href   = tgChat;
      document.getElementById('ptmBtn').href  = tgChat;
      document.getElementById('otherBtn').href= tgChat;
      // Remove JS handlers to avoid blocked navigation
      ['gpayBtn','ppBtn','ptmBtn'].forEach(id=>{
        const el=document.getElementById(id);
        const clone=el.cloneNode(true); el.parentNode.replaceChild(clone,el);
      });
    }
  </script>
</body>
</html>
