<!DOCTYPE html>
<html lang="ur">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <meta name="description" content="Watch short clips from popular Turkish drama series">
    <title>Clips - Turkish Drama Series</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #000;
            color: #fff;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            overflow: hidden;
            position: fixed;
            width: 100%;
            height: 100%;
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 16px;
            z-index: 1000;
        }

        .back-btn {
            color: #fff;
            text-decoration: none;
            font-size: 24px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }

        .header span {
            font-size: 18px;
            font-weight: 600;
        }

        /* Reels Container */
        .reels-container {
            width: 100%;
            height: 100vh;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .reels-container::-webkit-scrollbar {
            display: none;
        }

        /* Individual Reel */
        .reel-item {
            width: 100%;
            height: 100vh;
            scroll-snap-align: start;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #000;
        }

        .reel-item iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* Loading */
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #23c6ed;
            font-size: 18px;
            font-weight: 600;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(35, 198, 237, 0.2);
            border-top-color: #23c6ed;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 12px auto;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Bottom Navigation Safe Area */
        .nav-spacer {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: calc(80px + env(safe-area-inset-bottom));
            background: linear-gradient(0deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%);
            pointer-events: none;
            z-index: 999;
        }
    </style>
</head>
<body>

    <!-- Header -->
    <div class="header">
        <a href="/" class="back-btn" aria-label="Go back">‚Üê</a>
        <span>Clips</span>
        <div style="width: 40px;"></div>
    </div>

    <!-- Reels Container -->
    <div class="reels-container" id="reelsContainer">
        <div class="loading">
            <div class="spinner"></div>
            Loading clips...
        </div>
    </div>

    <!-- Bottom Navigation Spacer -->
    <div class="nav-spacer"></div>

    <!-- Footer Include -->
    <div id="footer-placeholder"></div>

    <script>
        // Your Instagram Reels URLs (Replace with your actual Instagram reel embed URLs)
        const reels = [
            'https://www.instagram.com/reel/DSPaWyPEnkI/embed',
            'https://www.instagram.com/reel/DSM1gs6knDs/embed',
            'https://www.instagram.com/reel/DSKQLl2kuYm/embed',
            // Add more reel embed URLs here
        ];

        // Load reels
        function loadReels() {
            const container = document.getElementById('reelsContainer');
            container.innerHTML = '';

            if (reels.length === 0) {
                container.innerHTML = '<div class="loading">No clips available</div>';
                return;
            }

            reels.forEach((url, index) => {
                const reelDiv = document.createElement('div');
                reelDiv.className = 'reel-item';
                reelDiv.innerHTML = `<iframe src="${url}" allowfullscreen loading="${index === 0 ? 'eager' : 'lazy'}"></iframe>`;
                container.appendChild(reelDiv);
            });
        }

        // Initialize
        loadReels();

        // Pause/Play videos on scroll (optional enhancement)
        const container = document.getElementById('reelsContainer');
        let lastScrollTop = 0;

        container.addEventListener('scroll', function() {
            const scrollTop = this.scrollTop;
            lastScrollTop = scrollTop;
        }, { passive: true });
    </script>

    <!-- Footer Loader Script -->
    <script>
    (async function loadFooterAndInit(){
      if (document.readyState !== 'complete') {
        await new Promise(resolve => window.addEventListener('load', resolve, { once: true }));
      }
      try {
        const res = await fetch('/includes/footer.html');
        if (!res.ok) throw new Error('Footer not found: ' + res.status);
        const html = await res.text();
        const ph = document.getElementById('footer-placeholder');
        ph.innerHTML = html;

        const nav = document.getElementById('smtv-bottom-nav');
        if(!nav) return;
        const items = Array.from(nav.querySelectorAll('.nav-item'));
        function clearActive(){ items.forEach(i=>i.classList.remove('active')); }

        const path = window.location.pathname.toLowerCase();
        let matched = items.find(a => {
          const name = (a.dataset.name||'').toLowerCase();
          if (name === 'home' && (path === '/' || path.includes('index'))) return true;
          return name && path.includes(name);
        });

        if(!matched){
          const last = localStorage.getItem('smtv_last_nav');
          if(last) matched = items.find(a => a.dataset.name === last);
        }
        if(matched) matched.classList.add('active');

        items.forEach(a => {
          a.addEventListener('click', function(e){
            clearActive();
            this.classList.add('active');
            try { localStorage.setItem('smtv_last_nav', this.dataset.name); } catch(e){}
            const href = this.getAttribute('href');
            setTimeout(()=> {
              if (location.pathname.toLowerCase() !== new URL(href, location.origin).pathname.toLowerCase()) {
                location.href = href;
              }
            }, 200);
          }, { passive: true });
        });

      } catch(err) {
        console.warn('Footer load/init error:', err);
      }
    })();
    </script>
</body>
</html>
