<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Complete Payment — SmTv Urdu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#0d171f" />
  <link rel="icon" href="/favicon.png" type="image/png" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet" />
  <style>
    :root{
      --bg:#0d171f; --card:#101b28; --line:#20364c; --text:#eaf6ff; --muted:#a8c7de;
      --accent:#19b3ff; --accent2:#ffd400; --chip:#0d2030; --chip-b:#284e70;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:'Montserrat',Arial,sans-serif}
    a{text-decoration:none}
    .wrap{max-width:760px;margin:0 auto;padding:12px}
    header{position:sticky;top:0;z-index:10;background:#111c28;border-bottom:1px solid #1e2b3a}
    header .bar{display:flex;align-items:center;gap:10px;padding:10px 12px}
    .back{background:#17263a;border:1px solid #203447;color:#8fd8ff;border-radius:8px;padding:7px 12px;font-weight:700}
    h1{margin:0;font-size:1.12em;font-weight:800}
    .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px;margin-top:14px;box-shadow:0 4px 18px #0004}
    .title{font-weight:800;color:#86e8ff;margin:0 0 8px 0}
    .note{font-size:.92em;color:var(--muted)}
    .row{display:grid;grid-template-columns:1fr;gap:10px}
    .buttons{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px}
    .btn{
      display:inline-flex;align-items:center;justify-content:center;gap:8px;
      padding:12px;border-radius:12px;font-weight:800;color:#081624;background:#19b3ff;
      box-shadow:0 4px 14px #19b3ff33;text-align:center
    }
    .btn.paytm{background:#00baf2}
    .btn.phonepe{background:#6739b7;color:#fff}
    .btn.gpay{background:#34a853;color:#fff}
    .btn.other{background:#ffd400;color:#13263a}
    .btn:active{transform:translateY(1px)}
    .pill{display:inline-block;background:var(--chip);border:1px solid var(--chip-b);border-radius:999px;padding:6px 10px;color:#aee6ff;font-weight:700}
    .upi-copy{display:flex;align-items:center;gap:8px;background:#0f2131;border:1px solid #23445f;border-radius:10px;padding:10px 12px}
    .copy-btn{background:#17314a;color:#9fe0ff;border:1px solid #28577b;border-radius:8px;padding:6px 10px;font-weight:800}
    .qrwrap{display:flex;align-items:center;gap:14px;flex-wrap:wrap}
    .qr{width:220px;height:220px;border-radius:12px;background:#fff;display:flex;align-items:center;justify-content:center}
    .qr img{width:100%;height:100%;object-fit:contain;border-radius:12px}
    .muted{opacity:.75}
    .cta{
      display:inline-block;background:var(--accent2);color:#13263a;font-weight:800;
      padding:10px 16px;border-radius:999px;box-shadow:0 4px 14px #ffd40055
    }
    details summary{cursor:pointer;font-weight:800;color:#aee6ff}
    .center{text-align:center}
    @media(min-width:680px){
      .buttons{grid-template-columns:repeat(4,1fr)}
      .row.two{grid-template-columns:1fr 1fr}
    }
  </style>
</head>
<body>
  <header>
    <div class="bar wrap">
      <a class="back" href="/premium">← Back</a>
      <h1>Complete Payment</h1>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <h2 class="title" id="planTitle">SmTv Urdu Premium</h2>

      <!-- UPI ID copy block -->
      <div class="upi-copy" style="margin:10px 0 6px">
        <div>
          <div class="note">Pay to UPI ID</div>
          <div id="upiText" style="font-weight:800;color:#aee6ff">dubbedseriespremiu@ybl</div>
        </div>
        <button id="copyBtn" class="copy-btn">Copy</button>
      </div>

      <p class="note" id="desc">
        Choose your UPI app or scan the QR to pay. Enter the amount manually in your UPI app. After payment, click “Activate subscription” to send the screenshot on Telegram.
      </p>

      <div class="buttons" style="margin-top:12px">
        <a id="gpayBtn" class="btn gpay" href="#">Google Pay</a>
        <a id="ppBtn" class="btn phonepe" href="#">PhonePe</a>
        <a id="ptmBtn" class="btn paytm" href="#">Paytm</a>
        <a id="otherBtn" class="btn other" href="#">Other UPI</a>
      </div>
    </section>

    <section class="card row two">
      <div>
        <h3 class="title">Scan UPI QR</h3>
        <div class="qrwrap">
          <div class="qr"><img src="/assets/posters/upi-qr.png" alt="UPI QR" /></div>
          <div class="note">
            - Open your UPI app and scan this QR, then enter the plan amount manually (e.g., ₹99 or ₹249).<br/>
            - If QR doesn’t open, use the UPI ID shown above.
          </div>
        </div>
      </div>
      <div>
        <h3 class="title">After payment</h3>
        <p class="note">Tap below to open Telegram with a prefilled message, then attach the payment screenshot for instant activation.</p>
        <p><a id="activateBtn" class="cta" href="#" target="_blank" rel="noopener">Activate subscription</a></p>
        <p class="muted" style="margin-top:6px">If any app shows “risk” or fails, try another UPI app or use the QR/UPI ID.</p>
      </div>
    </section>

    <section class="card">
      <h3 class="title">Help</h3>
      <details>
        <summary>Payment not going through?</summary>
        <div class="note">
          • Update your UPI app and retry after a minute.<br/>
          • Try another UPI app or use the QR/UPI ID and enter amount manually.<br/>
          • Payee name should show as “Syed abuddin”.
        </div>
      </details>
      <details>
        <summary>Need support?</summary>
        <div class="note">
          Message on Telegram: <a href="https://t.me/Shaikhyder7861" target="_blank" rel="noopener" style="color:#8fd8ff;text-decoration:underline">@Shaikhyder7861</a>.
        </div>
      </details>
    </section>

    <p class="center muted">UPI payment via your own app • Manual amount entry</p>
  </main>

  <script>
    // Config
    const VPA = 'dubbedseriespremiu@ybl';
    const PAYEE_NAME = 'Syed abuddin';
    const TELEGRAM_USERNAME = 'Shaikhyder7861';

    // Optional labels for the page (amount will be entered manually by user)
    const params = new URLSearchParams(location.search);
    const label = (params.get('label') || 'Premium').trim();
    document.getElementById('planTitle').textContent = `SmTv Urdu — ${label}`;

    // Build UPI deep link WITHOUT amount so user enters it manually
    const epoch = Date.now();
    const tn = 'SmTv Premium';
    const tr = `smtv-${label.toLowerCase().slice(0,1)}-${epoch}`;
    const upi = `upi://pay?pa=${encodeURIComponent(VPA)}&pn=${encodeURIComponent(PAYEE_NAME)}&cu=INR&tn=${encodeURIComponent(tn)}&tr=${encodeURIComponent(tr)}`;

    // Set UPI buttons (Android chooses the app)
    document.getElementById('gpayBtn').href = upi;
    document.getElementById('ppBtn').href = upi;
    document.getElementById('ptmBtn').href = upi;
    document.getElementById('otherBtn').href = upi;

    // Copy UPI ID
    document.getElementById('copyBtn').addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(VPA);
        const btn = document.getElementById('copyBtn');
        const old = btn.textContent;
        btn.textContent = 'Copied';
        setTimeout(()=>btn.textContent=old,1200);
      } catch(e) {
        alert('Copy failed. Long-press to copy: ' + VPA);
      }
    });

    // Telegram activation prefilled message
    const tgText =
      `Payment done for SmTv Premium (${label})\
UPI Ref: ${tr}\
VPA: ${VPA}\
Please activate my subscription.`;
    const tgShare = `https://t.me/share/url?url=${encodeURIComponent('')}&text=${encodeURIComponent(tgText)}`;
    const tgChat = `https://t.me/${TELEGRAM_USERNAME}`;
    const activate = document.getElementById('activateBtn');
    activate.href = tgShare;
    activate.addEventListener('click', () => { setTimeout(() => { window.open(tgChat, '_blank'); }, 800); });

    // iOS/desktop fallback: recommend QR/UPI ID
    const isAndroid = /Android/i.test(navigator.userAgent);
    if(!isAndroid){
      document.getElementById('desc').textContent =
        'On iOS/desktop, scan the QR below or use the UPI ID to pay and enter the amount manually. After payment, tap “Activate subscription” to send the screenshot on Telegram.';
      document.querySelectorAll('a[href^="upi://pay"]').forEach(a => { a.href = tgChat; });
    }
  </script>
</body>
</html>
